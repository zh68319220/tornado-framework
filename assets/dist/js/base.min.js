$(function(){$.fn.extend({showLoginModal:function(){$.fancybox(this.html(),{padding:5,scrolling:"visible",modal:!1,fitToView:!0,width:450,height:500,autoSize:!1,showCloseButton:!0,afterShow:function(){QC.Login({btnId:"qqLoginBtn"}),$.activePlaceHolder(),$("#login-from").on("submit",function(t){t.preventDefault(),t.stopPropagation();var n=!0;return $("#password").validatePsw("error-psw","密码格式不正确")||(n=!1),$("#username").validateUsername("error-username","用户名格式不正确")||(n=!1),n&&$.ajax({url:"/loginAJ",type:"POST",data:{username:$("#username").val(),password:$("#password").val()},success:function(t){t.status?location.reload():($("#error-username").text("用户名或密码不正确!"),$("#error-username").show())}}),!1})}})},setHighlight:function(t){$("#"+this.attr("id")+" li [name="+this.attr("data-hl")+"]").addClass(t)},validatePsw:function(t,n){return $("#"+t).hide(),$(this).val().length>=8&&/^[a-z0-9]*$/g.test($(this).val())?!0:($("#"+t).text(n),$("#"+t).show(),!1)},validateUsername:function(t,n){return $("#"+t).hide(),$(this).val().length>=6&&/^[a-z0-9]*$/g.test($(this).val())?!0:($("#"+t).text(n),$("#"+t).show(),!1)}}),$.extend({activePlaceHolder:function(){$("input").on("click",function(t){$("#"+$(this).attr("name")+"-span").hide()}),$("input").on("blur",function(t){""==$(this).val()&&$("#"+$(this).attr("name")+"-span").show()}),$("input").on("focus",function(t){$("#"+$(this).attr("name")+"-span").hide()}),$(".placeholder").on("click",function(t){$("#"+$(this).attr("id").split("-span")[0]).focus(),$(this).hide()})}}),$("#login-btn").on("click",function(t){t.preventDefault(),$("#login-page").showLoginModal()}),$("#login-btn2").on("click",function(t){t.preventDefault(),$("#login-page").showLoginModal()}),$("#menu-btn").on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),$("#menu-mob").show()}),$("body").on("touchstart",function(t){$("#menu-mob").hide()}),$("#menu").setHighlight("menu-highlight")});